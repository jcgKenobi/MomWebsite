<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wordle - Mom Edition</title>
    
    <!-- External Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="src/games/wordle/wordle.css">
    
    <!-- Game Scripts -->
    <script src="src/shared/utils/storage.js"></script>
    <script src="src/games/wordle/wordBanks.js"></script>
    <script src="src/games/wordle/game-logic.js"></script>
    <script src="src/shared/utils/storage-hook.js" type="text/babel"></script>
    <script src="src/games/wordle/WordleComponents.js" type="text/babel"></script>
    <script src="src/games/wordle/WordleGame.js" type="text/babel"></script>
    <script src="src/games/wordle/Statistics.js" type="text/babel"></script>
    <script src="src/games/wordle/WordleApp.js" type="text/babel"></script>
</head>
<body>
    <!-- React App Root -->
    <div id="root"></div>
    
    <!-- Initialize App -->
    <script type="text/babel">
        // Wait for all scripts to load and compile
        window.addEventListener('load', () => {
            // Ensure all components are available
            const checkDependencies = () => {
                const required = [
                    'WORD_BANKS', 'GAME_CONFIG', 'CATEGORY_NAMES', 'SPECIAL_KEYS',
                    'WordleGameLogic', 'KeyboardHandler',
                    'useEnhancedStorage', 'BasicStorage',
                    'MainMenu', 'GameModeMenu', 'WordleGrid', 'Keyboard', 
                    'EndOfRoundMenu', 'Leaderboard', 'WordleGame', 'Statistics', 'App'
                ];
                
                for (const dep of required) {
                    if (typeof window[dep] === 'undefined') {
                        console.warn(`Waiting for ${dep} to load...`);
                        return false;
                    }
                }
                return true;
            };
            
            // Try to initialize with retries
            let attempts = 0;
            const tryInit = () => {
                attempts++;
                if (checkDependencies()) {
                    console.log('All dependencies loaded, initializing app...');
                    initializeApp();
                } else if (attempts < 20) {
                    setTimeout(tryInit, 100);
                } else {
                    console.error('Failed to load all dependencies after 2 seconds');
                    // Try to initialize anyway
                    if (typeof initializeApp === 'function') {
                        initializeApp();
                    }
                }
            };
            
            // Start initialization attempt
            setTimeout(tryInit, 100);
        });
    </script>
</body>
</html>